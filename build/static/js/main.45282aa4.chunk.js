(this.webpackJsonpfitness_tracker_react=this.webpackJsonpfitness_tracker_react||[]).push([[0],{44:function(e,t,n){},70:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var r=n(11),c=n(0),s=n(16),a=n.n(s),i=n(17),o=n(8),u=n(6),l=n.n(u),j=n(9),b=(n(44),n(45),"https://fitnesstrac-kr.herokuapp.com/api"),h=function(){var e=Object(j.a)(l.a.mark((function e(t,n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(b,"/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})});case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,localStorage.setItem("token",JSON.stringify(c.token)),e.abrupt("return",c);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(j.a)(l.a.mark((function e(t,n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(b,"/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})});case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,localStorage.setItem("token",JSON.stringify(c.token)),e.abrupt("return",c);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(b,"/users/").concat(t,"/routines"),{headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(b,"/activities"),{headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(b,"/routines"),{headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r,c,s,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.goal,c=t.isPublic,e.prev=1,s=JSON.parse(localStorage.getItem("token")),console.log("token:",s),e.next=6,fetch("".concat(b,"/routines"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({name:n,goal:r,isPublic:c})});case 6:return a=e.sent,e.next=9,a.json();case 9:return i=e.sent,e.abrupt("return",i);case 13:throw e.prev=13,e.t0=e.catch(1),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();var v=n(1),m=function(e){var t=e.currentUser,n=e.setCurrentUser,s=Object(c.useState)(""),a=Object(r.a)(s,2),o=a[0],u=a[1],b=Object(c.useState)(""),d=Object(r.a)(b,2),O=d[0],x=d[1],f=Object(c.useState)(""),m=Object(r.a)(f,2),g=(m[0],m[1]),y=Object(c.useState)(),k=Object(r.a)(y,2),w=k[0],C=k[1],S=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"logout"!==w){e.next=3;break}return e.abrupt("return",N());case 3:if("login"!==w){e.next=8;break}return e.next=6,p(o,O);case 6:n=e.sent,T(n);case 8:if("register"!==w){e.next=19;break}return e.prev=9,e.next=12,h(o,O);case 12:r=e.sent,T(r),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){localStorage.removeItem("currentUser"),n(null)},T=function(e){var t;g(e.message),t=e.user,localStorage.setItem("currentUser",JSON.stringify(t)),n(e.user),u(""),x("")};return Object(v.jsxs)("header",{children:[Object(v.jsx)("h1",{children:"Welcome to Fitness Tracker"}),Object(v.jsx)("form",{className:"user-select",onSubmit:S,children:t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(i.b,{to:"/myroutines",activeClassName:"current",children:"My Routines"}),Object(v.jsx)(i.b,{to:"/publicroutines",activeClassName:"current",children:"Public Routines"}),Object(v.jsx)(i.b,{to:"/activities",activeClassName:"current",children:"Activities"}),Object(v.jsxs)("button",{name:"logout",type:"submit",value:"logout",onClick:function(){C("logout")},children:["LOG OUT, ",t.username]})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("input",{placeholder:"username",value:o,onChange:function(e){u(e.target.value)}}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{placeholder:"password",type:"password",value:O,onChange:function(e){x(e.target.value)}}),Object(v.jsx)("button",{name:"register",type:"submit",value:"register",onClick:function(){C("register")},children:"REGISTER"}),Object(v.jsx)("button",{name:"login",type:"submit",value:"login",onClick:function(){C("login")},children:"LOG IN"})]})})]})},g=n(20),y=n(28),k=n(18),w=n(21),C=n(19),S=(n(70),function(e){var t=e.currentUser,n=e.userRoutines,s=Object(c.useState)(!1),a=Object(r.a)(s,2),i=a[0],o=a[1],u=Object(c.useState)({name:"",goal:"",isPublic:!0}),b=Object(r.a)(u,2),h=b[0],p=b[1],d=Object(c.useState)(),O=Object(r.a)(d,2),x=O[0],m=O[1];console.log(x),console.log(h);var S=function(){o(!1)},N=function(e){var t=e.target,n=t.name,r=t.value;p((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(g.a)({},n,r))}))},T=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"openModal"===x&&(p({name:"",goal:"",isPublic:!0}),console.log(h)),"create"!==x){e.next=13;break}return e.prev=4,e.next=7,f(h);case 7:e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"routines",children:[Object(v.jsxs)("h2",{children:["Hi ",t.username,", Here are your Routines \xa0|\xa0 ",Object(v.jsx)(w.a,{variant:"primary",onClick:function(){m("openModal"),o(!0)},children:"Create Routine"})]}),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(k.a,{show:i,onHide:S,children:[Object(v.jsx)(k.a.Header,{closeButton:!0,children:Object(v.jsx)(k.a.Title,{children:"New Routine"})}),Object(v.jsxs)("form",{onSubmit:T,children:[Object(v.jsxs)(k.a.Body,{children:[Object(v.jsx)(C.a.Group,{controlId:"formBasicEmail",children:Object(v.jsx)(C.a.Control,{type:"text",name:"name",placeholder:"Enter routine name",onChange:N})}),Object(v.jsx)(C.a.Group,{controlId:"formBasicPassword",children:Object(v.jsx)(C.a.Control,{type:"text",name:"goal",placeholder:"Enter routine goal",onChange:N})})]}),Object(v.jsxs)(k.a.Footer,{children:[Object(v.jsx)(w.a,{variant:"secondary",type:"submit",onClick:function(){m("close"),S()},children:"Close"}),Object(v.jsx)(w.a,{variant:"primary",type:"submit",onClick:function(){m("create"),S()},children:"Create"})]})]})]})}),Object(v.jsxs)("p",{children:["There is a total of ",n.length," routines."]}),n.map((function(e){var t=e.id,n=e.name,r=e.goal,c=e.creatorName,s=e.activities;return Object(v.jsxs)("div",{className:"post",children:[Object(v.jsxs)("h3",{children:["Routine Name: ",n]}),Object(v.jsxs)("p",{children:["Routine Goal: ",r]}),Object(v.jsxs)("p",{children:["Creator Name: ",c]}),s.length>0?Object(v.jsxs)(v.Fragment,{children:[s.map((function(e){var t=e.id,n=e.name,r=e.description,c=e.duration,s=e.count;return Object(v.jsxs)("div",{className:"activities",children:[Object(v.jsxs)("h3",{children:["Routine Activity: ",n]}),Object(v.jsxs)("p",{children:["Activity Description: ",r]}),Object(v.jsxs)("p",{children:["Duration: ",c]}),Object(v.jsxs)("p",{children:["Count: ",s]})]},t)}))," "]}):Object(v.jsxs)(v.Fragment,{children:[" ",Object(v.jsxs)("p",{children:["There are ",s.length," Activities"]})," "]})]},t)}))]})}),N=(n(72),function(e){var t=e.currentUser,n=e.activities;return Object(v.jsxs)("div",{className:"activities",children:[Object(v.jsxs)("h2",{children:["Hi ",t.username,", Here are all activities"]}),Object(v.jsxs)("p",{children:["There is a total of ",n.length," activities."]}),n.map((function(e){var t=e.id,n=e.name,r=e.description;return Object(v.jsxs)("div",{className:"post",children:[Object(v.jsxs)("h3",{children:["Activity Name: ",n]}),Object(v.jsxs)("p",{children:["Description: ",r]})]},t)}))]})}),T=(n(73),function(e){var t=e.currentUser,n=e.routines;return Object(v.jsxs)("div",{className:"publicroutines",children:[Object(v.jsxs)("h2",{children:["Hi ",t.username,", Here are all public routines with their activities"]}),Object(v.jsxs)("p",{children:["There is a total of ",n.length," public routines."]}),n.map((function(e){var t=e.id,n=e.name,r=e.goal,c=e.creatorName,s=e.activities;return Object(v.jsxs)("div",{className:"post",children:[Object(v.jsxs)("h3",{children:["Routine Name: ",n]}),Object(v.jsxs)("p",{children:["Routine Goal: ",r]}),Object(v.jsxs)("p",{children:["Creator Name: ",c]}),s.map((function(e){var t=e.id,n=e.name,r=e.description,c=e.duration,s=e.count;return Object(v.jsxs)("div",{className:"activities",children:[Object(v.jsxs)("h3",{children:["Routine Activity: ",n]}),Object(v.jsxs)("p",{children:["Activity Description: ",r]}),Object(v.jsxs)("p",{children:["Duration: ",c]}),Object(v.jsxs)("p",{children:["Count: ",s]})]},t)}))]},t)}))]})}),R=(n(74),function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)([]),u=Object(r.a)(a,2),l=u[0],j=u[1],b=Object(c.useState)([]),h=Object(r.a)(b,2),p=h[0],f=h[1],g=Object(c.useState)([]),y=Object(r.a)(g,2),k=y[0],w=y[1];return Object(c.useEffect)((function(){if(!n)return j([]),f([]),void w([]);d(n.username).then((function(e){console.log("routines:",e),j(e)})).catch((function(e){console.log(e)})),O().then((function(e){console.log("activities:",e),w(e)})).catch((function(e){console.log(e)})),x().then((function(e){console.log("publicRoutines:",e),f(e)})).catch((function(e){console.log(e)}))}),[n]),Object(v.jsx)(i.a,{children:Object(v.jsxs)("div",{id:"App",children:[Object(v.jsx)(m,{currentUser:n,setCurrentUser:s}),n?Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(o.d,{children:[Object(v.jsx)(o.b,{path:"/myroutines",children:Object(v.jsx)(S,{currentUser:n,userRoutines:l})}),Object(v.jsx)(o.b,{path:"/publicroutines",children:Object(v.jsx)(T,{currentUser:n,routines:p})}),Object(v.jsx)(o.b,{path:"/activities",children:Object(v.jsx)(N,{currentUser:n,activities:k})}),Object(v.jsx)(o.b,{exact:!0,path:"/",children:Object(v.jsxs)("h2",{style:{padding:".5em"},children:["Welcome, ",n.username,"!"]})}),Object(v.jsx)(o.a,{to:"/"})]})}):Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(o.d,{children:[Object(v.jsx)(o.b,{exact:!0,path:"/",children:Object(v.jsx)("h2",{style:{padding:".5em"},children:"Please register or log in, above."})}),Object(v.jsx)(o.a,{to:"/"})]})})]})})});a.a.render(Object(v.jsx)(R,{}),document.getElementById("app"))}},[[75,1,2]]]);
//# sourceMappingURL=main.45282aa4.chunk.js.map